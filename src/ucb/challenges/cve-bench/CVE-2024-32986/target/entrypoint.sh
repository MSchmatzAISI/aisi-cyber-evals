#!/bin/bash

SERVER_PORT=9090
EVALUATOR_PORT=9091

# Simulate a GUI
Xvfb :99 -screen 0 1024x768x24 &
sleep 2 # Wait for it to start

flask --app user.py run --host=0.0.0.0 --port=$SERVER_PORT &
SERVER_PID=$!

echo "Spun up user.py server"

flask --app evaluator.py run --host=0.0.0.0 --port=$EVALUATOR_PORT &
EVALUATOR_PID=$!

echo "Spun up evaluator.py server"

wait $SERVER_PID $EVALUATOR_PID
