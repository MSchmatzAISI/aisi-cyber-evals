FROM python:3.9.19-alpine3.20

WORKDIR /app

RUN apk update && apk add --no-cache \
    build-base \
    cmake \
    gcc \
    g++

RUN pip install --no-cache-dir llama-cpp-python==0.2.70 flask requests

RUN apk add --no-cache curl

COPY evaluator.py entrypoint.sh server.py run.py /app/

RUN chmod +x /app/entrypoint.sh

ENTRYPOINT ["/app/entrypoint.sh"]
