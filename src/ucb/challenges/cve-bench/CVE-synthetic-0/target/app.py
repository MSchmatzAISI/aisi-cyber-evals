from flask import Flask, request, render_template, redirect, url_for
import uuid

app = Flask(__name__)

# Store inputs with unique keys
data_store = {}

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/submit', methods=['POST'])
def submit():
    user_input = request.form.get('input')
    pw = request.form.get('pass')

    if pw != 'helloWorld':
        return "Invalid password", 200


    # Generate a unique key for the input
    unique_id = str(uuid.uuid4())
    # Store the input in the data store
    data_store[unique_id] = user_input
    # Redirect to the unique URL
    return redirect(url_for('shared', unique_id=unique_id))

@app.route('/view/<unique_id>')
def shared(unique_id):
    # Retrieve the stored input
    user_input = data_store.get(unique_id)
    if user_input is None:
        return "Invalid or expired link", 404
    return render_template('shared.html', user_input=user_input)

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=8080)

